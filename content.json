{"pages":[],"posts":[{"title":"Hello World","text":"è¿™æ˜¯ä¸€ç¯‡æµ‹è¯•æ–‡æ¡£ï¼Œæˆ‘æƒ³çœ‹çœ‹æˆ‘çš„é…ç½®æ˜¯å¦æ­£ç¡®ï¼Ÿâ€‹ â€‹ â€‹ çœ‹çš„åˆ°å¯çˆ±çš„é¹¿é¸£å—ï¼Ÿ ğŸ™ƒ æœç„¶æ²¡æ­£å¸¸æ˜¾ç¤ºå•Šï¼Œé‚£ç¨ååœ¨ä¸»é¢˜çš„ layout æ–‡ä»¶å¤¹ä¸­çš„ post.ejs æ–‡ä»¶ä¸­åŠ ä¸Šè¿™ä¸ªè¯•è¯•ï¼š 1&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt; ğŸˆ å¦‚æœä½ å¯ä»¥çœ‹åˆ°è¿™æ¡æ¶ˆæ¯è¯´æ˜æ­¤æ—¶ä½ å·²ç»æˆåŠŸå®ç°äº† toulzx.top(SERVER) - github.io - yuque ä¸‰è€…ä¹‹é—´çš„è”é€š~â€‹ â€‹ ğŸ å¦‚æœä½ è¿˜èƒ½çœ‹åˆ°è¿™æ¡æ¶ˆæ¯è¯´æ˜ä½ å·²ç»æˆåŠŸå®ç°äº†è‡ªåŠ¨åŒ–å®Œæˆå¤šç«¯å‘å¸ƒçš„é…ç½®ã€‚â€‹ â€‹ ğŸ˜¥ å…¶ä¸­è¿˜æ˜¯é‡åˆ°å¾ˆå¤šå›°éš¾â€¦è™½ç„¶ä½†æ˜¯ï¼Œä¸€å®šå¯ä»¥è§£å†³çš„ï¼ â€‹ æˆåŠŸï¼æ­å–œä½ ï¼Œæ¥ä¸‹æ¥å¼€å§‹ä½ çš„åšå®¢ä¹‹æ—…å§ã€‚â€‹ â€‹ ç”±äºç½‘ç«™å°šåœ¨å»ºè®¾ä¸­ï¼Œç‰¹æ­¤ç”³æ˜æœ¬ç½‘ç«™ï¼ˆtoulzx.topï¼‰å¤‡æ¡ˆä¿¡æ¯å¦‚ä¸‹:â€‹ ç²¤ ICP å¤‡ 2020135754 å·","link":"/2021/09/18/test/"},{"title":"è¯­é›€ + GitHub + Hexo ä¸‰ç«¯åŒæ­¥çš„è‡ªåŠ¨åŒ–éƒ¨ç½²åšå®¢çš„æ­å»º","text":"æœ¬æ–‡å®Œæ•´ç‰ˆå·²è½¬ç§»è‡³ [yuque-hexo è‡ªåŠ¨åŒ–åŒæ­¥ï¼š PC &amp; GitHub &amp; Server çš„å®‰è£…ä¸é…ç½®](https://www.yuque.com/toulzx/website-sync/ yuque-hexo-guide)â€‹ â€‹ é£Ÿç”¨å£°æ˜â€‹ æœ¬æ–‡çš„ç›®çš„æ˜¯å®ç° **è¯­é›€** ç¼–è¾‘å‘å¸ƒåï¼Œ**GitHub Actions**** è‡ªåŠ¨åŒæ­¥åˆ° **github.io** ä»¥åŠ ****ä¸ªäººæœåŠ¡å™¨**ã€‚ç”±äºæ²¡æœ‰æ‰¾åˆ°ç±»ä¼¼çš„æ•™ç¨‹ï¼Œä¾¿è‡ªå·±æ ¹æ®ç½‘ç»œä¸Šçš„èµ„æ–™æ€»ç»“äº†ä¸€ä»½ï¼Œæœ‰äº›éœ€è¦ä¿®æ”¹çš„åœ°æ–¹ä¼šåœ¨æœ¬ç¯‡æå‡ºï¼Œç›¸åŒçš„æ“ä½œç›´æ¥é“¾æ¥åˆ°äº†åŸæ–‡ç›¸åº”æ®µè½å¤„ï¼Œè·³è½¬æŸ¥çœ‹å³å¯ï¼Œæœ¬æ–‡ä¸å†èµ˜è¿°ã€‚â€‹ å¦‚æœä½ æ²¡æœ‰æœåŠ¡å™¨å¹¶åªæƒ³åŒæ­¥åˆ° **github.io** ï¼Œé‚£ä¹ˆé˜…è¯»è¿™ç¯‡æ–‡ç« è¶³ä»¥ï¼š[**è¯­é›€è‡ªåŠ¨åŒæ­¥åˆ° hexo åšå®¢**](https://www.yuque.com/hxfqg9/web/gtb5ck#rOPSH)ã€‚ **å¦‚æœä½ ç¬¦åˆå¦‚ä¸‹è¦æ±‚ï¼Œä½ å°†è·å¾—æ›´å¥½çš„ä½“éªŒï¼š ** GitHub ä½¿ç”¨åŸºç¡€ äº‘æœåŠ¡å™¨&amp;åŸŸå è´­ä¹°å’Œé¡¹ç›®éƒ¨ç½²ç»å† ä½¿ç”¨æœç´¢å¼•æ“è§£å†³é—®é¢˜çš„èƒ½åŠ› èƒ½å¤Ÿç¨³å®šçš„è®¿é—® GitHub å’Œ Google â€‹ æœ¬æ–‡ç›®å‰ä»…åœ¨[**è¯­é›€**](https://www.yuque.com/toulzx/website-sync/yuque-github-hexo)ã€[**ä¸ªäººåšå®¢**](https://toulzx.github.io/)å‘å¸ƒå‘å¸ƒï¼Œä¸å…è®¸è½¬è½½ã€‚â€‹ æœ¬åœ°ä¸æœåŠ¡å™¨ç«¯çš„å®‰è£…ä¸é…ç½®ã€GitHub ä¸ªäººä»“åº“åˆ›å»ºè¿™ç¯‡æ–‡ç« å·²ç»å†™çš„å¾ˆè¯¦ç»†äº†ï¼š[å®‰è£… Hexo åšå®¢å¹¶éƒ¨ç½²åˆ° GitHub æˆ–äº‘æœåŠ¡å™¨](https://blog.csdn.net/qq_43187818/article/details/104468721?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7Edefault-3.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7Edefault-3.no_search_link)ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚ä½†è¯·æ³¨æ„ï¼Œå½“é˜…è¯»åˆ°[éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨](https://blog.csdn.net/qq_43187818/article/details/104468721?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7Edefault-3.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7Edefault-3.no_search_link#t5)ä¸€èŠ‚ï¼Œå®Œæˆå®‰è£… Git ä»¥åŠé…ç½®ä»“åº“åï¼Œä½ éœ€è¦åœæ­¢å¹¶ç»§ç»­é˜…è¯»æœ¬æ–‡ã€‚ è¡¥å……ï¼šæœ¬åœ°é€šè¿‡ ssh è¿æ¥äº‘æœåŠ¡å™¨è¯·æ³¨æ„ï¼Œè¿™ä¸€æ­¥ä¸æ˜¯å¿…é¡»çš„ã€‚å®ƒåªæ˜¯æ–¹ä¾¿ä½ åœ¨ç”µè„‘æœ¬åœ°ç›´æ¥æ§åˆ¶æœåŠ¡å™¨ï¼Œè€Œä¸æ˜¯ä½¿ç”¨äº‘æœåŠ¡å™¨çš„åœ¨çº¿æ§åˆ¶å°ã€‚å› æ­¤ï¼Œå¦‚æœä½ å·²ç»å®‰è£…å¹¶é…ç½®è¿‡ XShellï¼Œæˆ–è€…ä½ å¹¶ä¸å¸¸ä½¿ç”¨æœåŠ¡å™¨ï¼Œè¿™ä¸€æ­¥çœ‹èµ·æ¥å°±å¤šæ­¤ä¸€ä¸¾äº†ã€‚ä½ å¯ä»¥è·³è¿‡è¿™ä¸€æ­¥ã€‚â€‹ å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ Windowsï¼Œæˆ‘æ¨èä½ ä½¿ç”¨ git bash è€Œä¸æ˜¯ cmd æ¥å®Œæˆé…ç½®ã€‚æŒ‰ç…§æ•™ç¨‹ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š 1$ ssh -v git@[äº‘æœåŠ¡å™¨çš„å…¬ç½‘IPåœ°å€] ä»£ç å—ç¬¦å·è¯´æ˜ï¼š $ è¡¨ç¤ºè¿™åé¢ä¸€æ¡æ§åˆ¶æŒ‡ä»¤ï¼Œä½ ä¸éœ€è¦è¾“å…¥$â€‹ [è¿™é‡Œä¼šè§£é‡Šå¡«ä»€ä¹ˆ] è¡¨ç¤ºè¿™æ˜¯ä¸ªå˜é‡ï¼Œå®ƒå¾€å¾€å› äººè€Œå¼‚ ç„¶åä½ å¯èƒ½é‡åˆ°å¦‚ä¸‹æŠ¥é”™ï¼š 1Permission denied (publickey,gssapi-keyex,gssapi-with-mic) ä½ å¯ä»¥å°è¯•ç™»å½• root è´¦æˆ·æµ‹è¯•ï¼Œä½†ç»“æœæ˜¯ä¸€æ ·çš„ï¼š 12345$ ssh -v root@[äº‘æœåŠ¡å™¨çš„å…¬ç½‘IPåœ°å€]......Permission denied (publickey,gssapi-keyex,gssapi-with-mic) â€‹ è§£å†³æ–¹æ³•å‚è€ƒæ­¤æ–‡ï¼š[Permission denied (publickey,gssapi-keyex,gssapi-with-mic) è§£å†³æ–¹æ³•](https://xiaojueguan.blog.csdn.net/article/details/84946557?utm_medium=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link)åœ¨ root ç”¨æˆ·ä¸‹ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š 1$ sudo vim /etc/ssh/sshd_config æ‰¾åˆ°è¢« # æ³¨é‡Šçš„å¦‚ä¸‹å‘½ä»¤ï¼ŒæŒ‰ i è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œå–æ¶ˆæ³¨é‡Šå¹¶ä¿®æ”¹æˆï¼š 12PasswordAuthentication yesPermitRootLogin yes æŒ‰ esc é€€å‡ºç¼–è¾‘æ¨¡å¼ï¼Œè¾“å…¥ :wq ä¿å­˜ä¿®æ”¹ã€‚â€‹ å†æ‰§è¡Œï¼š 1$ sudo systemctl restart sshd ç„¶åæœ¬åœ°ï¼ˆPCï¼‰å†æ¬¡å°è¯•ç™»å½•æœåŠ¡å™¨ï¼š 1$ ssh -v git@[äº‘æœåŠ¡å™¨çš„å…¬ç½‘IPåœ°å€] æ­¤æ—¶åº”è¯¥å¯ä»¥ç™»å½•æˆåŠŸã€‚â€‹ è‡ªåŠ¨åŒ–éƒ¨ç½²æ­¤å¤„å‚è€ƒäº†[Hexo åšå®¢éƒ¨ç½²åˆ°è…¾è®¯äº‘æœåŠ¡å™¨å…¨æµç¨‹](https://blog.csdn.net/StaunchKai/article/details/82878928?utm_medium=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-1.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-1.no_search_link)å¹¶æ ¹æ®å®é™…æƒ…å†µè¡¥å……äº†å†…å®¹ åˆ›å»º git è£¸åº“1234567891011$ su root # æ³¨æ„æ˜¯ root ç”¨æˆ·ä¸‹$ cd /home/git$ ls # ä»€ä¹ˆéƒ½æ²¡æœ‰$ git init --bare [website].git # åˆ›å»ºè£¸åº“ï¼Œè¿™é‡Œæˆ‘å°±å‘½åä¸º website.git$ ls # å¯ä»¥å‘ç°ï¼Œç›®å½•ä¸‹å·²è¢«æ–°å»º website.git$ chown git:git -R [website].git # æˆæƒ ä½¿ç”¨ git-hooks åŒæ­¥ç½‘ç«™æ ¹ç›®å½•è¿™ä½¿ç”¨çš„æ˜¯ post-receive/post-update è¿™ä¸ªé’©å­ï¼Œå½“ git æœ‰æ”¶å‘çš„æ—¶å€™å°±ä¼šè°ƒç”¨è¿™ä¸ªé’©å­ã€‚ åœ¨ website.git è£¸åº“çš„ hooks æ–‡ä»¶å¤¹ä¸­ï¼Œæ–°å»º post-receive / post-update æ–‡ä»¶ï¼ˆä¸åŒ git ç‰ˆæœ¬ä¸åŒï¼Œæ­¤å¤„é»˜è®¤éƒ½åˆ›å»ºï¼‰ï¼š 1$ vim [website].git/hooks/post-receive 1$ vim [website].git/hooks/post-receive æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼Œå¹¶ä¿å­˜é€€å‡ºï¼š 1git --work-tree=/home/www/website --git-dir=/home/git/[website].git checkout -f èµ‹äºˆæ­¤æ–‡ä»¶æƒé™ï¼š 1$ chmod +x /home/git/[website].git/hooks/post-receive 1chmod +x /home/git/[website].git/hooks/post-update hexo åŒæ­¥ è¯­é›€ å†…å®¹ï¼šæ­¤å¤„å†…å®¹å‚è€ƒ[è¯­é›€è‡ªåŠ¨åŒæ­¥åˆ°hexoåšå®¢](https://www.yuque.com/hxfqg9/web/gtb5ck#PV23h)ã€‚â€‹ è¯­é›€çŸ¥è¯†åº“è·¯å¾„è®¾ç½®ä»“åº“è®¾ç½® -&gt; çŸ¥è¯†åº“ä¿¡æ¯ -&gt; è·¯å¾„ è¯­é›€ Tokenä¸ªäººå¤´åƒ -&gt; è´¦æˆ·è®¾ç½® -&gt; Token -&gt; æ–°å»º -&gt; å‹¾é€‰è¯»æƒé™ å®‰è£…å¹¶é…ç½® [yuque-hexo](https://github.com/x-cold/yuque-hexo)1$ npm i -g yuque-hexo ç„¶ååœ¨åˆ›å»ºçš„ Hexo é¡¹ç›®çš„ç›®å½•ä¸‹çš„ package.json æ–‡ä»¶ä¸­æ·»åŠ ï¼š 12345678910111213141516&quot;yuqueConfig&quot;: { &quot;postPath&quot;: &quot;source/_posts&quot;, &quot;cachePath&quot;: &quot;yuque.json&quot;, &quot;mdNameFormat&quot;: &quot;slug&quot;, &quot;adapter&quot;: &quot;hexo&quot;, &quot;concurrency&quot;: 5, &quot;baseUrl&quot;: &quot;https://www.yuque.com/api/v2&quot;, &quot;login&quot;: &quot;[è¯­é›€ç”¨æˆ·å]&quot;, &quot;repo&quot;: &quot;[è¯­é›€ç”¨ä»¥æ›´æ–°åšå®¢çš„çŸ¥è¯†åº“è·¯å¾„å]&quot;, &quot;token&quot;: &quot;[è¯­é›€Token]&quot;, &quot;onlyPublished&quot;: true, &quot;onlyPublic&quot;: true }, &quot;devDependencies&quot;: { &quot;yuque-hexo&quot;: &quot;^1.6.0&quot; } é…ç½®æœ¬åœ° _config.yml æ–‡ä»¶æ­¤å¤„çš„é…ç½®ä»…æ˜¯æ–¹ä¾¿æœ¬åœ°æ‰‹åŠ¨ä¸Šä¼ ï¼Œä¹Ÿå¯è·³è¿‡ã€‚â€‹ åœ¨åˆ›å»ºçš„ Hexo é¡¹ç›®çš„ç›®å½•ä¸‹ï¼Œæ‰“å¼€æ­¤æ–‡ä»¶ï¼Œæ‰¾åˆ° #deploymentï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š 1234567deploy:- type: git repo: https://github.com/[username]/[username].github.io branch: master- type: git repo: git@[æœåŠ¡å™¨å…¬ç½‘IP]:/home/git/website.git branch: master åæ¥åˆ›å»ºçš„ä»“åº“é»˜è®¤ branch-name å¯èƒ½æ˜¯ mainï¼Œè¯·æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ï¼Œå½“ä½ ä¸ç¡®å®šçš„æ—¶å€™ï¼Œå¯ä»¥é™¤å» branch é¡¹ï¼Œä½ åªéœ€ç¡®ä¿ä»“åº“ä»…æœ‰ä¸€ä¸ªåˆ†æ”¯å³å¯ã€‚ è¿™æ—¶å€™ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼Œå°±ä¼šæŠŠè¯­é›€çš„æ–‡ç« ç»™ä¸‹è½½ä¸‹æ¥ï¼Œä¸‹è½½åˆ° \\source_postsï¼š 1234567$ yuque-hexo sync # æŠŠè¯­é›€çš„æ–‡ç« ç»™ä¸‹è½½ä¸‹æ¥ï¼Œä¸‹è½½åˆ° \\source\\_posts$ hexo generate # ç”Ÿæˆé™æ€æ–‡ä»¶$ hexo server # å¯åœ¨æµè§ˆå™¨è¾“å…¥ localhost:4000 æŸ¥çœ‹é¢„è§ˆ$ hexo deploy # éƒ¨ç½²ï¼ˆåˆ°æœåŠ¡å™¨ï¼‰ GitHub Actions è‡ªåŠ¨æ›´æ–°æ­¤å¤„å‚è€ƒäº†ï¼š[Github Actions è‡ªåŠ¨éƒ¨ç½² Hexo åšå®¢è‡³ä¸ªäººæœåŠ¡å™¨](https://blog.csdn.net/qq_51661411/article/details/117458995#t3)â€‹ åˆ›å»º GitHub Token ã€ä»“åº“ ä»¥åŠ ä»“åº“Secretsç›´æ¥çœ‹[æ­¤å¤„](https://www.yuque.com/hxfqg9/web/gtb5ck#rOPSH) ã€‚å›¾æ–‡å¹¶èŒ‚ï¼Œç®€å•æ˜äº†ã€‚â€‹ è¯·æ³¨æ„ï¼Œä»“åº“ Secretsï¼Œé™¤äº† GH_TOKEN å’Œ GH_REF ä¹‹å¤–ï¼Œä½ è¿˜éœ€è¦é¢å¤–åˆ›å»ºå‡ ä¸ª Secretsï¼Œè¿™åœ¨é“¾æ¥ä¸­æ²¡æåŠã€‚ HEXO_DEPLOY_PRI ï¼šå®ƒçš„å†…å®¹å–è‡ªæœ¬åœ° C:\\Users\\[PC-username]\\.ssh\\id_rsaï¼Œå°†è¯¥æ–‡ä»¶æ‰€æœ‰å†…å®¹å¤åˆ¶å‡ºæ¥å³å¯ã€‚ GH_USERNAME ï¼šå¡«å†™ä½ çš„ GitHub åç§° GH_EMAIL ï¼šå¡«å†™ä½ çš„ GitHub ç»‘å®šçš„é‚®ç®± â€‹ å¹¶ä¸”ï¼Œworkflow çš„å†…å®¹ä»¥æ­¤å¤„ä¸ºå‡†ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263name: website-syncon: [push, repository_dispatch]jobs: blog-sync-deploy: name: Hexo blog build &amp; deploy runs-on: ubuntu-latest env: TZ: Asia/Shanghai steps: - name: Checkout codes uses: actions/checkout@v2 - name: Setup node uses: actions/setup-node@v1 with: node-version: '12.x' - name: Cache node modules uses: actions/cache@v1 with: path: ~/.npm key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }} - name: Install dependencies run: | npm install hexo-cli -g npm install yuque-hexo -g npm install - name: Sync run: yuque-hexo sync - name: Generate files run: | hexo clean hexo generate - name: Server Authentication env: ACTION_DEPLOY_KEY: ${{ secrets.HEXO_DEPLOY_PRI }} run: | mkdir -p ~/.ssh/ echo &quot;$ACTION_DEPLOY_KEY&quot; &gt; ~/.ssh/id_rsa chmod 600 ~/.ssh/id_rsa ssh-keyscan ${{ secrets.GH_IP }} &gt;&gt; ~/.ssh/known_hosts git config --global user.name &quot;${{ secrets.GH_USERNAME }}&quot; git config --global user.email &quot;${{ secrets.GH_EMAIL }}&quot; - name: Deploy blog run: | git config --global user.name &quot;${{ secrets.GH_USERNAME }}&quot; git config --global user.email &quot;${{ secrets.GH_EMAIL }}&quot; git clone https://${{ secrets.GH_USERNAME }}:${{ secrets.GH_TOKEN }}@${{ secrets.GH_REF }}.git .deploy_git hexo deploy æ³¨æ„ï¼Œæ­¤ä»£ç å—ä¸­çš„ [] ä¸æ˜¯ä¸Šæ–‡è§„å®šçš„æ„æ€ï¼Œ [] æ˜¯ä»£ç ä¸­åŒ…å«çš„å†…å®¹ï¼Œè¯·å‹¿é™¤å»ã€‚â€‹ é…ç½® serverless äº‘å‡½æ•°è¯·çœ‹æ­¤å¤„ã€‚â€‹ â€‹ å¤§åŠŸå‘Šæˆæ­å–œä½ ï¼ å‚è€ƒèµ„æ–™ ã€è¯­é›€ã€‘è¯­é›€è‡ªåŠ¨åŒæ­¥åˆ° hexo åšå®¢ | yichen ã€CSDNã€‘Hexo åšå®¢éƒ¨ç½²åˆ°è…¾è®¯äº‘æœåŠ¡å™¨å…¨æµç¨‹ | CareyQ03 ã€CSDNã€‘å®‰è£… Hexo åšå®¢å¹¶éƒ¨ç½²åˆ° GitHub æˆ–äº‘æœåŠ¡å™¨ï¼ˆç»†èŠ‚æ•™ç¨‹ï¼Œè¶Šè¿‡å„ç§å‘ï¼‰| æ¡è°·æŸ¯å— ã€CSDNã€‘Hexo æ­å»º - éƒ¨ç½²æœåŠ¡å™¨ | Dawson_ ã€CSDNã€‘nginx server ä¸­çš„ root å’Œ location çš„ root çš„åŒºåˆ« | fengzyf ã€CSDNã€‘Permission denied (publickey,gssapi-keyex,gssapi-with-mic) è§£å†³æ–¹æ³• | xiaojueguan ã€åšå®¢å›­ã€‘git init å’Œ git init â€“bare çš„åŒºåˆ« | æ¥è¿‘é£çš„åœ°æ–¹ coc ã€CSDNã€‘Github Actions è‡ªåŠ¨éƒ¨ç½² Hexo åšå®¢è‡³ä¸ªäººæœåŠ¡å™¨ | ä¸æŸ“è½»è£³ ã€CSDNã€‘ssh å…å¯†ä»¥åè¿˜æ˜¯éœ€è¦è¾“å…¥å¯†ç ï¼šssh é…ç½®çš„ä¸€äº›å‘ | Van_2009 ã€CSDNã€‘SSH ç®€ä»‹åŠä¸¤ç§è¿œç¨‹ç™»å½•çš„æ–¹æ³• | Jack LDZ â€‹","link":"/2021/09/20/yuque-github-hexo/"},{"title":"yuque-hexo è‡ªåŠ¨åŒ–åŒæ­¥ï¼š PC &amp; GitHub &amp; Server çš„å®‰è£…ä¸é…ç½®","text":"æœ¬æ–‡ç›®å‰ä»…åœ¨è¯­é›€ã€ä¸ªäººåšå®¢å‘å¸ƒå‘å¸ƒï¼Œä¸å…è®¸è½¬è½½ã€‚è°¢è°¢ï¼ æœ¬æ–‡çš„ç›®çš„æ˜¯å®ç°è¯­é›€ç¼–è¾‘å‘å¸ƒåï¼ŒGitHub Actions è‡ªåŠ¨åŒæ­¥åˆ° github.io ä»¥åŠ ä¸ªäººæœåŠ¡å™¨ã€‚â€‹ å¼•ç”¨å£°æ˜è¿™ç¯‡æ•™ç¨‹æ˜¯æ ¹æ®ç½‘ç»œä¸Šçš„èµ„æ–™å½¢æˆçš„ï¼Œæœ¬ç¯‡æ•™ç¨‹å¼•ç”¨å†…å®¹å£°æ˜å¦‚ä¸‹ï¼šâ€‹ ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡å‚è€ƒäº† CSDN åšä¸»ã€Œæ¡è°·æŸ¯å—ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ã€‚åŸæ–‡é“¾æ¥ï¼šå®‰è£… Hexo åšå®¢å¹¶éƒ¨ç½²åˆ° GitHub æˆ–äº‘æœåŠ¡å™¨ï¼ˆç»†èŠ‚æ•™ç¨‹ï¼Œè¶Šè¿‡å„ç§å‘ï¼‰æœ¬æ–‡æœ¬åœ°éƒ¨ç½²ã€GitHub éƒ¨ç½²ã€Server éƒ¨ç½²å†…å®¹æ‘˜å½•å…¶æœ¬åœ°ä¸æœåŠ¡å™¨ç«¯çš„å®‰è£…ä¸é…ç½®éƒ¨åˆ†çš„æ•™ç¨‹ï¼Œå¹¶ä½œä¿®æ”¹ã€‚ â€‹ ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡å‚è€ƒäº† CSDN åšä¸»ã€ŒJack LDZã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ã€‚åŸæ–‡é“¾æ¥ï¼šSSH ç®€ä»‹åŠä¸¤ç§è¿œç¨‹ç™»å½•çš„æ–¹æ³•æœ¬æ–‡Server éƒ¨ç½²-è®¾ç½® SSHéƒ¨åˆ†å†…å®¹æ‘˜å½•äº†å…¶SSH ä¸¤ç§çº§åˆ«çš„è¿œç¨‹ç™»å½•-å…¬é’¥ç™»å½•éƒ¨åˆ†çš„æ•™ç¨‹ï¼Œå¹¶ä½œä¿®æ”¹ã€‚ â€‹ ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡å‚è€ƒäº† CSDN åšä¸»ã€ŒCareyQ03ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ã€‚åŸæ–‡é“¾æ¥ï¼šHexo åšå®¢éƒ¨ç½²åˆ°è…¾è®¯äº‘æœåŠ¡å™¨å…¨æµç¨‹æœ¬æ–‡è‡ªåŠ¨åŒ–éƒ¨ç½²éƒ¨åˆ†å†…å®¹æ‘˜å½•äº†å…¶è‡ªåŠ¨åŒ–éƒ¨ç½²éƒ¨åˆ†çš„æ•™ç¨‹ï¼Œå¹¶ä½œä¿®æ”¹ã€‚ â€‹ ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡å‚è€ƒäº† CSDN åšä¸»ã€Œä¸æŸ“è½»è£³ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ã€‚åŸæ–‡é“¾æ¥ï¼šGithub Actions è‡ªåŠ¨éƒ¨ç½² Hexo åšå®¢è‡³ä¸ªäººæœåŠ¡å™¨æœ¬æ–‡è‡ªåŠ¨åŒ–éƒ¨ç½²éƒ¨åˆ†å†…å®¹æ‘˜å½•äº†å…¶è‡ªåŠ¨åŒ–éƒ¨ç½²éƒ¨åˆ†çš„æ•™ç¨‹ï¼Œå¹¶ä½œä¿®æ”¹ã€‚ â€‹ ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡å‚è€ƒäº†è¯­é›€åšä¸»ã€Œyichenã€çš„åŸåˆ›æ–‡ç« ã€‚åŸæ–‡é“¾æ¥ï¼šè¯­é›€è‡ªåŠ¨åŒæ­¥åˆ° hexo åšå®¢æœ¬æ–‡è‡ªåŠ¨åŒ–éƒ¨ç½²ã€åç»­-å›¾ç‰‡æ— æ³•æ­£å¸¸å±•ç¤ºéƒ¨åˆ†å†…å®¹æ‘˜å½•äº†æ­¤æ•™ç¨‹å†…å®¹ï¼Œå¹¶ä½œä¿®æ”¹ã€‚ â€‹ å¦‚æœä½ æ²¡æœ‰æœåŠ¡å™¨æˆ–åªæƒ³åŒæ­¥åˆ° github.io ï¼Œé‚£ä¹ˆé˜…è¯»è¿™ç¯‡è¯­é›€å³å¯ï¼šè¯­é›€è‡ªåŠ¨åŒæ­¥åˆ° hexo åšå®¢ã€‚ ä¸‹é¢å¼€å§‹æˆ‘ä»¬çš„æ¢ç´¢å§ï¼šï¼‰ æœ¬åœ° PC éƒ¨ç½²æœ¬åœ°ä¸»æœºä»¥ Windows 10 ç³»ç»Ÿä¸ºä¾‹ã€‚ 1. å®‰è£… Node.js Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œæ˜¯ä¸€ä¸ªè®© JavaScript è¿è¡Œåœ¨æœåŠ¡ç«¯çš„å¼€å‘å¹³å°ã€‚ Node.js çš„å®˜æ–¹ä¸‹è½½åœ°å€ï¼šhttps://nodejs.org/å½“ç„¶å®ƒä¹Ÿæœ‰ä¸­æ–‡ç½‘ï¼šhttp://nodejs.cn/ å»ºè®®ä¸‹è½½ LTSï¼ˆå³ Long Term Supportï¼Œé•¿æœŸæŠ€æœ¯æ”¯æŒï¼‰ï¼ˆæ­¤å¤„æ˜¯** 64 ä½**ç‰ˆæœ¬çš„ï¼Œå…¶ä»–ç‰ˆæœ¬å¦‚æºç å¯ä»¥åœ¨ DOWNLOAD ç•Œé¢æ‰¾åˆ°ï¼‰ï¼Œè¾ƒä¸ºç¨³å®šï¼Œä¸‹è½½æ–‡ä»¶ï¼Œå®‰è£…è¿‡ç¨‹åŸºæœ¬ç›´æ¥ä¸‹ä¸€æ­¥å³å¯ã€‚å®‰è£…å®Œæˆåä½¿ç”¨ å‘½ä»¤æç¤ºç¬¦ï¼ˆä»¥ä¸‹å‡ç®€å†™ cmdï¼‰ æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸã€‚ 123$ node -v # æŸ¥çœ‹ node ç‰ˆæœ¬ï¼Œä¹Ÿå¯ä½¿ç”¨ $ node --versionï¼Œä¸‹åŒ$ npm -v # æŸ¥çœ‹ npm ç‰ˆæœ¬ ä»£ç å—ç¬¦å·è¯´æ˜ï¼š $ è¡¨ç¤ºè¿™åé¢ä¸€æ¡æ§åˆ¶æŒ‡ä»¤ï¼Œä½ ä¸éœ€è¦è¾“å…¥$ # è¡¨ç¤ºè¿™åé¢æ˜¯æ³¨é‡Šè¯­å¥ï¼Œä¸ä¼šè¢«æ‰§è¡Œï¼Œä½ ä¸éœ€è¦è¾“å…¥# å¾€åä¸å†é¢å¤–å£°æ˜ã€‚ å‡ºç°å®‰è£…çš„ç‰ˆæœ¬å·è¯´æ˜å®‰è£…æˆåŠŸã€‚ 2. å®‰è£… Git Git æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå¯ä»¥æœ‰æ•ˆã€é«˜é€Ÿåœ°å¤„ç†ä»å¾ˆå°åˆ°éå¸¸å¤§çš„é¡¹ç›®ç‰ˆæœ¬ç®¡ç†ã€‚ Git Bash å’Œ CMD çš„åŒºåˆ«ï¼šBash æ˜¯åŸºäº CMD çš„ï¼ŒBash åœ¨ CMD çš„åŸºç¡€ä¸Šæ–°å¢äº†ä¸€äº›å‘½ä»¤å’ŒåŠŸèƒ½ï¼Œæ•…å»ºè®®ä½¿ç”¨ Bash æ›´æ–¹ä¾¿ã€‚ æˆ‘ä»¬å»ºè®®ä½ ä½¿ç”¨ Git Bash æ›¿ä»£ CMDï¼ŒGit Bash å¯ä»¥ä¾¿æ·åç»­çš„æ“ä½œã€‚â€‹ â€‹ å®˜æ–¹ç½‘ç«™ï¼šhttps://git-scm.com/ é€‰æ‹© Windows ç‰ˆæœ¬å®‰è£…ã€‚æŒ‰ç…§å®˜æ–¹æ–‡æ¡£æ¨èä¸­å›½å¤§é™†ç”¨æˆ·ä» æ·˜å® Git for Windows é•œåƒ ä¸‹è½½ Gitï¼ˆè¯´å¾—å¯¹ï¼‰ã€‚macOS å’Œ Linux ç³»ç»Ÿéƒ½æœ‰è‡ªå¸¦çš„ Terminal ç»ˆç«¯æ–¹ä¾¿ä¸‹è½½ Git ã€‚ 3. å®‰è£… HexoHexo çš„å®˜æ–¹ç½‘ç«™ï¼šhttps://hexo.io/ è¯¥åšå®¢æ¡†æ¶æ‹¥æœ‰ä¸­æ–‡æ–‡æ¡£ï¼Œæœ‰äº›èµ„æ–™éœ€è¦å‚è€ƒæ–‡æ¡£ã€‚ ç”±äº npm æœåŠ¡å™¨åœ¨å›½å¤–ï¼Œå› æ­¤ä½¿ç”¨ npm ç›´æ¥ä¸‹è½½å¯èƒ½ä¼šé‡åˆ°å¡é¡¿çš„é—®é¢˜ï¼ˆé™¤éä½ å¯ä»¥æµç•…åœ°ç§‘å­¦ä¸Šç½‘ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆå°† npm è½¬æ¢æˆæ·˜å®çš„é•œåƒæºï¼š 1$ npm config set npm config set registry https://registry.npm.taobao.org ç„¶åå®‰è£… cnpm ï¼š 1$ npm install -g cnpm --registry=https://registry.npm.taobao.org ç„¶åé€šè¿‡ cnpm å®‰è£… Hexoï¼š 1$ cnpm install -g hexo-cli ç­‰å¾…å®‰è£…ç»“æŸã€‚â€‹ é€‰æ‹©ä¸€ä¸ªç›®å½•æ¥åˆå§‹åŒ–åšå®¢ï¼Œä¾‹å¦‚ E:/ ç›®å½•ä¸‹ï¼š 123$ cd e:$ hexo init website$ cd website æ‰§è¡ŒæˆåŠŸåå®‰è£…ä¸¤ä¸ªæ’ä»¶ï¼š 12345$ npm install hexo-deployer-git --save$ npm install hexo-server --save# æˆ–è€…æŒ‰ç…§å®˜æ–¹æ–‡æ¡£ ç›´æ¥ ä½¿ç”¨å‘½ä»¤ä¸€æ­¥å®‰è£…ï¼š$ npm install [hexo-deployer-git](https://github.com/hexojs/hexo-deployer-git) å…è®¸ä½ åœ¨æœ¬åœ°å¿«æ·åœ°å®ç° hexo çš„ git éƒ¨ç½²ã€‚ [hexo-server](https://github.com/hexojs/hexo-server) å…è®¸ä½ åœ¨æœ¬åœ°æœåŠ¡å™¨ä¸Šé¢„è§ˆåšå®¢ã€‚ â€‹ å®‰è£…æˆåŠŸåå¯åœ¨æœ¬æœºæŸ¥çœ‹è‡ªå·±çš„åšå®¢äº†ï¼š 1$ hexo server # æˆ–ç®€å†™æˆ $ hexo s æ‰“å¼€æµè§ˆå™¨è¾“å…¥ localhost:4000 å¯ä»¥çœ‹åˆ°åˆå§‹ç•Œé¢ã€‚æŒ‰ Ctrl+C å…³é—­æœ¬åœ°æœåŠ¡å™¨ã€‚â€‹ â€‹ GitHub éƒ¨ç½²é¦–å…ˆä½ å¾—æœ‰ä¸ª GitHub è´¦æˆ·ï¼Œè¿™é‡Œå°±ä¸æä¾›åˆ›å»ºè´¦æˆ·çš„æ•™ç¨‹äº†ã€‚ 1. åˆ›å»º GitHub Pages æ ¼å¼çš„å…¬æœ‰ä»“åº“ è¿™ä¸ªä»“åº“å°†å­˜æ”¾ hexo ç¼–è¯‘åçš„åšå®¢é™æ€é¡µé¢ æ‰“å¼€ GitHub ï¼Œç‚¹å‡» new ä¸€ä¸ª repositoryï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“ï¼Œä»“åº“åç§°å¿…é¡»è¦éµå®ˆ GitHub Pages çš„æ ¼å¼ï¼š [your-username].github.ioã€‚ ç¼–è€…æ³¨ï¼šä¸€èˆ¬æ— éœ€å‹¾é€‰ Initialize this repository with a READMEã€‚ å»ºå¥½ä»“åº“åï¼Œåœ¨ Settings è®¾ç½®ä¸­æœ‰ä¸€ä¸ª GitHub Pages ä¸€é¡¹ï¼Œé‡Œé¢å°±å†™ç€ GitHub Pages ä¸ºæˆ‘ä»¬åˆ›å»ºå¥½çš„åŸŸåã€‚åœ¨æµè§ˆå™¨ä¸­è®¿é—®å°±å¯ä»¥çœ‹åˆ°ä¸€ä¸ªåˆå§‹çš„ç•Œé¢ã€‚è¿™å°±æ˜¯åšå®¢çš„é»˜è®¤åœ°å€ï¼Œå½“ç„¶åé¢æˆ‘ä»¬ä¹Ÿå¯æ¢æˆè‡ªå·±çš„åŸŸåã€‚ 2. è®¾ç½® SSHåŠ¡å¿…ç¡®ä¿åœ¨ æœ¬åœ° PC å·²ç»å®Œæˆäº† Node.jsã€Git å’Œ Hexo çš„å®‰è£…ï¼Œæœ¬åœ°ï¼ˆPCï¼‰æ‰“å¼€ **Git Bash**ã€‚â€‹ å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ä½¿ä½¿ç”¨ Git çš„è¯ï¼Œéœ€è¦é…ç½®å¦‚ä¸‹ä¿¡æ¯ï¼š 12$ git config --global user.name [your-username]$ git config --global user.email [your-email] ä»£ç å—ç¬¦å·è¯´æ˜ï¼š[tips here] è¡¨ç¤ºè¿™æ˜¯ä¸ªå˜é‡ï¼Œå…¶å†…å®¹å› äººè€Œå¼‚ï¼Œä½ ä¸éœ€è¦è¾“å…¥[] â€‹ åœ¨æœ¬æœºç”Ÿæˆå¯†é’¥å¯¹ä½¿ç”¨ ssh-keygen ç”Ÿæˆç§é’¥å’Œå…¬é’¥ï¼š 1$ ssh-keygen -t rsa -tè¡¨ç¤ºç±»å‹é€‰é¡¹ï¼Œè¿™é‡Œé‡‡ç”¨ rsa åŠ å¯†ç®—æ³•ã€‚â€‹ ç„¶åæ ¹æ®æç¤ºä¸€æ­¥æ­¥çš„æŒ‰ enter é”®å³å¯ï¼Œæ³¨æ„ï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼Œå»ºè®®ä¸ºç§é’¥è®¾ç½®å¯†ç ï¼ˆå¦‚æœä¸æƒ³è®¾ç½®å°±æŒ‰ enter è·³è¿‡å³å¯ï¼‰ã€‚â€‹ æ ¹æ®æç¤ºæ‰¾åˆ°ä½ çš„å¯†é’¥ id_rsa å’Œå…¬é’¥ id_rsa.pub çš„ä½ç½®ã€‚â€‹ GitHub é…ç½® SSH æ­¤æ­¥éª¤éå¿…é¡»ï¼Œä½†æ¨èã€‚ç›®çš„æ˜¯æ–¹ä¾¿æœ¬åœ° Git çš„åç»­æ“ä½œï¼ˆä¸ç”¨æ¯æ¬¡éƒ½ç™»å½•ä¸”æ›´åŠ å®‰å…¨ï¼‰ã€‚ æ‰“å¼€ GitHub å¹¶ç™»å½•ï¼Œä¾æ¬¡ç‚¹å‡»ï¼šå¤´åƒ -&gt; Setting -&gt; SSH and GPG keys -&gt; New SSH keyâ€‹ å°†åˆšåˆšç”Ÿæˆçš„**å…¬é’¥ **id_rsa.pub æ–‡ä»¶é‡Œçš„å†…å®¹å¤åˆ¶åˆ° Key é‡Œé¢ï¼ˆç”¨ è®°äº‹æœ¬ æ‰“å¼€å…¬é’¥æ–‡ä»¶å³å¯ï¼‰ï¼Œåç§°ä»»æ„ï¼Œç„¶åé€‰æ‹©æ·»åŠ ï¼ŒGitHub æç¤ºè¾“å…¥å¯†ç ç¡®è®¤åå®Œæˆæ·»åŠ ã€‚â€‹ æ¥ç€åœ¨ æœ¬åœ° PC çš„ Git Bash ä¸Šè¾“å…¥ï¼š 1$ ssh -T git@github.com ç¬¬ä¸€æ¬¡çš„æ—¶å€™ä¾æ—§ä¼šè®©ä½  yes ç¡®è®¤ ï¼Œå¦‚æœçœ‹åˆ° Hi åé¢æ˜¯è‡ªå·±çš„ç”¨æˆ·åï¼Œå°±è¯´æ˜æˆåŠŸäº†ã€‚â€‹ 3. ä»æœ¬åœ° PC ä¸Šæ¨é€åˆ° GitHubæ¥ä¸‹æ¥å›åˆ°æˆ‘ä»¬çš„ PC ä¸Šï¼Œåœ¨åˆšåˆšæˆ‘ä»¬ç”Ÿæˆçš„ e:/website ç›®å½•ä¸‹ï¼Œæ‰¾åˆ° hexo çš„é…ç½®æ–‡ä»¶ _config.ymlï¼Œç”¨ç¼–è¾‘å™¨æ‰“å¼€å®ƒï¼ˆæ–‡æœ¬ç¼–è¾‘å™¨ã€Notepad++æˆ– VScode éƒ½è¡Œï¼‰ã€‚ä¿®æ”¹æœ€ä¸‹é¢æœ‰ä¸ª deploy çš„é…ç½®ï¼š 1234deploy:- type: git repo: git@github.com:[your-username]/[your-username].github.io.git branch: main æ³¨æ„ç¼©è¿›ã€‚æ³¨æ„ï¼Œä»¥å‰åˆ›å»ºçš„ä»“åº“åˆ†æ”¯ branch çš„é»˜è®¤åç§°åº”è¯¥æ˜¯ masterï¼Œå¦‚æœä½ ä¸æ¸…æ¥šï¼Œè¯·å…ˆæŸ¥çœ‹ä½ çš„åˆ†æ”¯åã€‚â€‹ ä¿å­˜å¹¶é€€å‡ºï¼Œç„¶åå‘å¸ƒåˆ° GitHub ä¸Šï¼š 1234567891011$ hexo clean$ hexo generate # æ„å»º$ hexo server # å¯é€‰ï¼Œæœ¬åœ°æœåŠ¡å™¨æŸ¥çœ‹$ hexo deploy # éƒ¨ç½²åˆ° GitHub# å½“ç„¶ä¹Ÿå¯ç®€å†™æˆ:$ hexo clean &amp;&amp; hexo g &amp;&amp; hexo d è¿™é‡Œä¸ä¸€å®šæ¯æ¬¡éƒ½è¦ cleanï¼Œclean ä¼šæ¸…é™¤ç¼“å­˜ï¼Œå¯¼è‡´ä¸€äº›ç½‘ç«™çš„è®¡æ•°è„šæœ¬æ¸…é›¶ã€‚â€‹ åœ¨ æœ¬åœ° PC æµè§ˆå™¨ä¸Šè¾“å…¥ GitHub Pages çš„åŸŸå https://[your-username].github.io ï¼Œå°±å¯ä»¥åœ¨äº’è”ç½‘ä¸Šè®¿é—®ä½ çš„åšå®¢äº†ã€‚â€‹ Server éƒ¨ç½²é¦–å…ˆä½ éœ€è¦æ‹¥æœ‰ä¸€ä¸ªæœåŠ¡å™¨å’ŒåŸŸåï¼Œä¾‹å¦‚é˜¿é‡Œäº‘ ECSã€é˜¿é‡Œäº‘è½»é‡åº”ç”¨æœåŠ¡å™¨ã€è…¾è®¯äº‘ CVMã€ç™¾åº¦äº‘ BCC ç­‰ã€‚è¿™é‡Œä¸å†æä¾›è´­ä¹°å’Œé…ç½®çš„æ•™ç¨‹äº†ã€‚â€‹ è¿™é‡Œæé†’ä¸€ä¸‹ï¼Œæ£€æŸ¥å®‰å…¨ç»„çš„åº”ç”¨ç±»å‹ HTTP åè®® TCP ç«¯å£ 80 æ˜¯å¦è®¾ç½®æ‰“å¼€ï¼Œæ²¡æœ‰çš„è¯éœ€é…ç½®ä¸€ä¸‹å®‰å…¨ç»„ï¼š å»ºè®®ä½¿ç”¨ Linux ç³»ç»Ÿçš„æœåŠ¡å™¨é•œåƒã€‚è¿™é‡Œä»¥ä½¿ç”¨äº‘æœåŠ¡å™¨çš„ ContOS ä¸ºä¾‹ã€‚â€‹ 1. æ­å»º nginx Nginx æ˜¯ä¸€æ¬¾è½»é‡çº§çš„ Web æœåŠ¡å™¨ / åå‘ä»£ç†æœåŠ¡å™¨åŠç”µå­é‚®ä»¶ä»£ç†æœåŠ¡å™¨ï¼Œåœ¨ BSD-like åè®®ä¸‹å‘è¡Œã€‚å…¶ç‰¹ç‚¹æ˜¯å æœ‰å†…å­˜å°‘ï¼Œå¹¶å‘èƒ½åŠ›å¼ºï¼Œäº‹å®ä¸Š nginx çš„å¹¶å‘èƒ½åŠ›åœ¨åŒç±»å‹çš„ç½‘é¡µæœåŠ¡å™¨ä¸­è¡¨ç°è¾ƒå¥½ï¼Œä¸­å›½å¤§é™†ä½¿ç”¨ nginx ç½‘ç«™ç”¨æˆ·æœ‰ï¼šç™¾åº¦ã€äº¬ä¸œã€æ–°æµªã€ç½‘æ˜“ã€è…¾è®¯ã€æ·˜å®ç­‰ã€‚ ä½¿ç”¨äº‘æœåŠ¡å•†æä¾›çš„è¿œç¨‹ç™»é™†ç™»å½•è¿›äº‘æœåŠ¡å™¨ï¼Œè¾“å…¥ä¸‹åˆ—å‘½ä»¤è¿›å…¥ root ç”¨æˆ·ï¼š 1$ sudo su root å®‰è£… nginxï¼š 1$ yum install -y nginx å®‰è£…æˆåŠŸåä½¿ç”¨å¼€å¯ç¯å¢ƒï¼š 1$ nginx åœ¨æœ¬åœ° PC çš„æµè§ˆå™¨ä¸­è¾“å…¥äº‘æœåŠ¡å™¨çš„å…¬ç½‘ IPï¼ˆå¦‚æœä½ é“¾æ¥äº†åŸŸåï¼Œä¹Ÿå¯è¾“å…¥åŸŸåï¼‰ï¼Œå°±ä¼šæ˜¾ç¤ºç±»ä¼¼ç•Œé¢ï¼šä»¥ä¸Šç•Œé¢æ˜¯ CentOS ç‰ˆæœ¬çš„ï¼Œå…¶ä»–æœåŠ¡å™¨ä¼šæœ‰æ‰€ä¸åŒã€‚ 2. é…ç½® nginxå®é™…ä¸Šæˆ‘ä»¬éœ€è¦å°†è¿™ä¸ªåœ°å€æŒ‡å‘æˆ‘ä»¬çš„åšå®¢ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å»ä¿®æ”¹ nginx çš„é…ç½®æ–‡ä»¶ï¼š 12345$ cd /etc/nginx # è¿›å…¥è·¯å¾„$ vi nginx.conf # ä½¿ç”¨vimç¼–è¾‘å™¨ç¼–è¾‘é…ç½®æ–‡ä»¶# è¾“å…¥ i è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œå¯ä»¥ä¿®æ”¹æ–‡ä»¶ æç¤ºï¼šé˜¿é‡Œäº‘å’Œè…¾è®¯äº‘ä¸‹è½½åº“ä¸­ï¼Œé»˜è®¤çš„é…ç½®æ–‡ä»¶æ˜¯ä½äº /etc/nginx ä¸‹çš„ nginx.confï¼Œæœ‰äº›æœåŠ¡å™¨å¯èƒ½æ˜¯ /etc/nginx/conf.d/default.conf ï¼ŒæŒ‰ç…§å®˜æ–¹çš„å®‰è£…æ–¹æ³•åˆ™å¯èƒ½æ˜¯/etc/nginx/conf/nginx.conf æˆ‘ä»¬éœ€è¦ä¿®æ”¹å¦‚ä¸‹å†…å®¹ï¼š å°†æœ€ä¸Šä¸€è¡Œçš„ user æ”¹ä¸º rootï¼ˆæˆ–è€…åˆ›å»ºåä¸º nginx çš„ç”¨æˆ·å¹¶ç»™äºˆæƒé™ï¼‰ å‘ä¸‹å¯»æ‰¾ï¼Œåœ¨ http ä¸­æ›´æ”¹ root æŒ‡å‘çš„è·¯å¾„ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œé€‰æ‹© /home/www/website ï¼Œå½“ç„¶æ­¤æ—¶æˆ‘ä»¬è¿˜æ²¡æœ‰åˆ›å»ºè¿™ä¸ªæ–‡ä»¶å¤¹ã€‚ åŒæ—¶å¦‚æœæœ‰äº†åŸŸåçš„è¯å¯ä»¥åœ¨ server_name å†™ä¸ŠåŸŸåã€‚ 12# ç¼–è¾‘ç»“æŸä¹‹åï¼ŒæŒ‰ esc é”®é€€å‡ºç¼–è¾‘# ç„¶åè¾“å…¥ :wq å¹¶æ•²å›è½¦é”®ï¼Œä¿å­˜å¹¶é€€å‡º vim æ–‡ä»¶ç¼–è¾‘å™¨ åˆ›å»ºæˆ‘ä»¬æ‰€æŒ‡å®šçš„è·¯å¾„ï¼š 1234$ cd ~/home ## è¿™ä¸€æ­¥æ‰¾ä¸åˆ°è·¯å¾„çš„å¯å°è¯• $ cd ~/../home$ mkdir www$ cd /www$ mkdir website è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†åšå®¢çš„æ ¹è·¯å¾„ /home/www/website ï¼Œè¿™ä¸ nginx.conf æ–‡ä»¶è®¾ç½®çš„å†…å®¹ç›¸å¯¹åº”ã€‚â€‹ 3. å®‰è£… Node.jsåœ¨ Linux ç³»ç»Ÿä¸Šå®‰è£… Node.js çš„æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œè¯¦ç»†å¯ä»¥å‚è€ƒæœç´¢å¼•æ“æˆ–è€… Node.js çš„ GitHub æ–‡ä»¶ã€‚è¿™é‡Œæä¾›ä¸€ç§æ–¹æ³•ï¼š 12345curl -sL https://rpm.nodesource.com/setup_13.x | bash -# è¿™é‡Œçš„setup_13.xæŒ‡Node.js13çš„ç‰ˆæœ¬ï¼Œå¯ä»¥æ”¹ä¸ºå…¶ä»–ç‰ˆæœ¬ï¼Œå»ºè®®ä¸è¦å¤ªä½ä¸ºå¥½ï¼Œhexoä¸€äº›ä¸»é¢˜çš„Node.jsç‰ˆæœ¬éƒ½æ¯”è¾ƒé«˜ã€‚yum install -y nodejs åœ¨å®‰è£…è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‘ç”Ÿä¸‹è½½é€Ÿåº¦ææ…¢çš„æƒ…å†µï¼Œå…·ä½“å–å†³äºäº‘æœåŠ¡å™¨é€‰æ‹©çš„æºã€‚å®‰è£…å®Œæˆä¹‹ååƒæˆ‘ä»¬ PC ä¸Šä¸€æ ·æ‰§è¡Œä¸€ä¸‹ç‰ˆæœ¬å·å‘½ä»¤ï¼š 123$ node -v$ npm -v 4. å®‰è£… Git å¹¶é…ç½® git ç”¨æˆ· ä¸»è¦æ˜¯è®©æˆ‘ä»¬çš„ PC å¯ä»¥é€šè¿‡ ssh çš„æ–¹å¼è¿æ¥åˆ°äº‘æœåŠ¡å™¨ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥é€šè¿‡ $ hexo deploy å°†æˆ‘ä»¬çš„åšå®¢æ¨åˆ°æœåŠ¡å™¨ä¸Šã€‚ å®‰è£… Git 1$ yum install git æ·»åŠ åä¸º git çš„ç”¨æˆ·ï¼š 1$ adduser git ä¿®æ”¹å¹¶é…ç½® sudoers æ–‡ä»¶æƒé™ï¼š 12$ chmod 740 /etc/sudoers$ vi /etc/sudoers æ‰¾åˆ°è¿™æ®µè¯å¹¶è¡¥å……ï¼ŒåŒæ ·æ˜¯ vim ç¼–è¾‘å™¨çš„æ“ä½œï¼š 12root ALL=(ALL) ALLgit ALL=(ALL) ALL ä¿å­˜é€€å‡ºåå°† sudoers æ–‡ä»¶çš„æƒé™æ”¹å›æ¥ï¼š 1$ chmod 400 /etc/sudoers è®¾ç½® git ç”¨æˆ·çš„å¯†ç ï¼š 1$ sudo passwd git 5. æœ¬åœ°é€šè¿‡ ssh è¿æ¥äº‘æœåŠ¡å™¨ è¯·æ³¨æ„ï¼Œè¿™ä¸€æ­¥ä¸æ˜¯å¿…é¡»çš„ã€‚å®ƒåªæ˜¯æ–¹ä¾¿ä½ åœ¨ç”µè„‘æœ¬åœ°ç›´æ¥æ§åˆ¶æœåŠ¡å™¨ï¼Œè€Œä¸æ˜¯ä½¿ç”¨äº‘æœåŠ¡å™¨çš„åœ¨çº¿æ§åˆ¶å°ã€‚å› æ­¤ï¼Œå¦‚æœä½ å·²ç»å®‰è£…å¹¶é…ç½®è¿‡ XShellï¼Œæˆ–è€…ä½ å¹¶ä¸å¸¸ä½¿ç”¨æœåŠ¡å™¨ï¼Œè¿™ä¸€æ­¥çœ‹èµ·æ¥ä¼šæ˜¾å¾—å¤šæ­¤ä¸€ä¸¾äº†ã€‚ â€‹ åŸºæœ¬æ­¥éª¤åœ¨æœ¬åœ° PCï¼ˆæ³¨æ„ï¼Œä¸æ˜¯æœåŠ¡å™¨ç«¯ï¼ï¼‰ï¼Œå°†ä¹‹å‰åˆ›å»ºå¥½çš„å…¬é’¥å¤åˆ¶åˆ°è¿œç¨‹ä¸»æœºï¼ˆæœåŠ¡å™¨ï¼‰ä¸­ï¼š 1$ ssh-copy-id git@[public-ip-of-your-server] ç™»å½•éœ€è¦è¾“å…¥ä¹‹å‰è®¾ç½®çš„å¯†ç ã€‚å¯†ç æ­£ç¡®ä¼šæ˜¾ç¤ºå·²æ·»åŠ ï¼šç»§ç»­åœ¨ æœ¬åœ° PC ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š 1$ ssh -v root@[public-ip-of-your-server] å‡ºç° git ç”¨æˆ·çš„å‘½ä»¤ï¼ŒæˆåŠŸç™»å½•ã€‚â€‹ ERROR: Permission deniedä½ å¯èƒ½é‡åˆ°å¦‚ä¸‹æŠ¥é”™ï¼š 1# Permission denied (publickey,gssapi-keyex,gssapi-with-mic) ä½ å¯ä»¥å°è¯•ç™»å½• root è´¦æˆ·æµ‹è¯•ï¼Œä½†ç»“æœæ˜¯ä¸€æ ·çš„ï¼š 123$ ssh -v root@[public-ip-of-your-server]# Permission denied (publickey,gssapi-keyex,gssapi-with-mic) è§£å†³æ–¹æ³•å‚è€ƒäº†æ­¤æ–‡ï¼šPermission denied (publickey,gssapi-keyex,gssapi-with-mic) è§£å†³æ–¹æ³•åœ¨æœåŠ¡å™¨ç«¯ï¼Œroot ç”¨æˆ·ä¸‹ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š 1$ sudo vim /etc/ssh/sshd_config æ‰¾åˆ°è¢« # æ³¨é‡Šçš„å¦‚ä¸‹å‘½ä»¤ï¼ŒæŒ‰ i è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œå–æ¶ˆæ³¨é‡Šå¹¶ä¿®æ”¹æˆï¼š 12PasswordAuthentication yesPermitRootLogin yes æŒ‰ esc é€€å‡ºç¼–è¾‘æ¨¡å¼ï¼Œè¾“å…¥ :wq ä¿å­˜ä¿®æ”¹ã€‚â€‹ å†æ‰§è¡Œï¼š 1$ sudo systemctl restart sshd ç„¶åæœ¬åœ°ï¼ˆPCï¼‰å†æ¬¡å°è¯•ç™»å½•æœåŠ¡å™¨ï¼š 1$ ssh -v git@[äº‘æœåŠ¡å™¨çš„å…¬ç½‘IPåœ°å€] æ­¤æ—¶åº”è¯¥å¯ä»¥ç™»å½•æˆåŠŸã€‚ è‡ªåŠ¨åŒ–éƒ¨ç½²å®ç° è¯­é›€ ç¼–è¾‘å‘å¸ƒåï¼Œå€ŸåŠ© serverless äº‘å‡½æ•° å’Œ GitHub Actions è‡ªåŠ¨åŒæ­¥åˆ° github.io ä»¥åŠ ä¸ªäººæœåŠ¡å™¨ä¸Šã€‚ 1. åˆ›å»º git è£¸åº“åœ¨æœåŠ¡å™¨ç«¯ï¼ˆä½ ç°åœ¨å¯ä»¥é€‰æ‹©ä½¿ç”¨äº‘æœåŠ¡å™¨åœ¨çº¿ç™»å½•ï¼Œæˆ–è€…æœ¬åœ° ssh è¿æ¥äº†ï¼‰åˆ›å»ºè£¸åº“ï¼š 1234567891011$ su root # æ³¨æ„æ˜¯ root ç”¨æˆ·ä¸‹$ cd /home/git$ ls # ä»€ä¹ˆéƒ½æ²¡æœ‰$ git init --bare [website].git # åˆ›å»ºè£¸åº“ï¼Œè¿™é‡Œæˆ‘å°±å‘½åä¸º website.git$ ls # å¯ä»¥å‘ç°ï¼Œç›®å½•ä¸‹å·²è¢«æ–°å»º website.git$ chown git:git -R [website].git # æˆæƒ 2. ä½¿ç”¨ git-hooks åŒæ­¥ç½‘ç«™æ ¹ç›®å½•è¿™ä½¿ç”¨çš„æ˜¯ post-receive/post-update è¿™ä¸ªé’©å­ï¼Œå½“ git æœ‰æ”¶å‘çš„æ—¶å€™å°±ä¼šè°ƒç”¨è¿™ä¸ªé’©å­ã€‚ åœ¨ website.git è£¸åº“çš„ hooks æ–‡ä»¶å¤¹ä¸­ï¼Œæ–°å»º post-receive / post-update æ–‡ä»¶ï¼ˆä¸åŒ git ç‰ˆæœ¬ä¸åŒï¼Œæ­¤å¤„å°±éƒ½åˆ›å»ºäº†ï¼‰ï¼š 1$ vim [website].git/hooks/post-receive 1$ vim [website].git/hooks/post-receive æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼Œå¹¶ä¿å­˜é€€å‡ºï¼š 1git --work-tree=/home/www/website --git-dir=/home/git/[website].git checkout -f èµ‹äºˆæ­¤æ–‡ä»¶æƒé™ï¼š 1$ chmod +x /home/git/[website].git/hooks/post-receive 1$ chmod +x /home/git/[website].git/hooks/post-update 3. hexo åŒæ­¥è¯­é›€å†…å®¹â€‹ å®‰è£…å¹¶é…ç½® yuque-hexoâ€‹ å…ˆç™»å½•è¯­é›€ï¼Œåˆ›å»ºä¸€ä¸ªäº’è”ç½‘å¯è§çš„çŸ¥è¯†åº“ã€‚â€‹ è¯­é›€çŸ¥è¯†åº“è·¯å¾„è®¾ç½®ï¼šä»“åº“è®¾ç½® -&gt; çŸ¥è¯†åº“ä¿¡æ¯ -&gt; è·¯å¾„è¯­é›€ Token è®¾ç½®ï¼šä¸ªäººå¤´åƒ -&gt; è´¦æˆ·è®¾ç½® -&gt; Token -&gt; æ–°å»º -&gt; å‹¾é€‰è¯»æƒé™ å®‰è£…å¹¶é…ç½® yuque-hexoï¼š 1$ npm i -g yuque-hexo ç„¶ååœ¨åˆ›å»ºçš„ Hexo é¡¹ç›®çš„ç›®å½•ä¸‹çš„ package.json æ–‡ä»¶ä¸­æ·»åŠ ï¼š 12345678910111213141516&quot;yuqueConfig&quot;: { &quot;postPath&quot;: &quot;source/_posts&quot;, &quot;cachePath&quot;: &quot;yuque.json&quot;, &quot;mdNameFormat&quot;: &quot;slug&quot;, &quot;adapter&quot;: &quot;hexo&quot;, &quot;concurrency&quot;: 5, &quot;baseUrl&quot;: &quot;https://www.yuque.com/api/v2&quot;, &quot;login&quot;: &quot;[è¯­é›€ç”¨æˆ·å]&quot;, &quot;repo&quot;: &quot;[è¯­é›€ç”¨ä»¥æ›´æ–°åšå®¢çš„çŸ¥è¯†åº“è·¯å¾„å]&quot;, &quot;token&quot;: &quot;[è¯­é›€Token]&quot;, &quot;onlyPublished&quot;: true, &quot;onlyPublic&quot;: true }, &quot;devDependencies&quot;: { &quot;yuque-hexo&quot;: &quot;^1.6.0&quot; } é…ç½®æœ¬åœ° _config.yml æ–‡ä»¶ æ­¤å¤„çš„é…ç½®ä»…æ˜¯æ–¹ä¾¿åç»­æœ¬åœ°æ‰‹åŠ¨ä¸Šä¼  â€‹ åœ¨åˆ›å»ºçš„ Hexo é¡¹ç›®çš„ç›®å½•ä¸‹ï¼Œæ‰“å¼€æ­¤æ–‡ä»¶ï¼Œæ‰¾åˆ° deployï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š 123- type: git repo: git@[public-ip-of-your-server]:/home/git/[website].git branch: master æ·»åŠ å®Œåå®Œæ•´çš„ deploy åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š 1234567deploy:- type: git repo: https://github.com/[your-username]/[your-username].github.io branch: main- type: git repo: git@[public-ip-of-your-server]:/home/git/[website].git branch: master è¿™æ—¶å€™åœ¨æœ¬åœ°ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼Œå°±ä¼šæŠŠè¯­é›€çš„æ–‡ç« ç»™ä¸‹è½½ä¸‹æ¥ï¼Œä¸‹è½½åˆ° \\source_postsï¼š 1$ yuque-hexo sync éƒ¨ç½²çš„æµç¨‹ä»ç„¶ä¸€è‡´ï¼Œåªä¸è¿‡ç°åœ¨å¯ä»¥åŒæ—¶éƒ¨ç½²åˆ° github.io ä»¥åŠæœåŠ¡å™¨äº†ï¼š 12345$ hexo generate # ç”Ÿæˆé™æ€æ–‡ä»¶$ hexo server # å¯åœ¨æµè§ˆå™¨è¾“å…¥ localhost:4000 æŸ¥çœ‹é¢„è§ˆ$ hexo deploy # éƒ¨ç½²ï¼ˆåˆ°github.io å’ŒæœåŠ¡å™¨ï¼‰ 4. åˆ›å»ºç§æœ‰ä»“åº“å¹¶è®¾ç½® GitHub Actionsåˆ›å»ºç§æœ‰ä»“åº“ å­˜æ”¾ hexo æºç ï¼Œå¹¶ç”¨æ¥æ‰§è¡Œè‡ªåŠ¨åŒ– åœ¨ github ä¸Šåˆ›å»ºä¸€ä¸ªç§æœ‰ä»“åº“ï¼Œè¿™é‡Œå°†å®ƒå‘½åä¸º yuque-website-syncï¼Œä½ å¯ä»¥ä»»æ„å‘½åã€‚ æ³¨æ„ï¼šåœ¨ä»“åº“é‡Œé¢å†æ”¾ä¸€ä¸ªä»“åº“æ˜¯æ²¡æ³•æŠŠé‡Œé¢é‚£ä¸ªä»“åº“ push åˆ° github çš„ï¼Œåªä¼šä¼ ä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ï¼Œå¯¼è‡´åæœŸåšå®¢æˆäº†ç©ºç™½é¡µé¢ï¼Œæœ€ç®€å•ç²—æš´çš„åŠæ³•å°±æ˜¯æŠŠä½  git clone çš„ hexo ä¸»é¢˜é‡Œçš„ .git æ–‡ä»¶å¤¹ç»™åˆ æ‰ ç„¶ååœ¨æ„å»ºäº†åšå®¢çš„ hexo ç›®å½•ä¸‹è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼ˆè¿™é‡Œæ˜¯ä¹‹å‰æåˆ°çš„è·¯å¾„ E:/websiteï¼‰ï¼š 12345$ git init$ git add .$ git commit -m &quot;first commit&quot;$ git remote add origin https://github.com/[your-username]/[yuque-website-sync].git$ git push -u origin main åˆ›å»º GitHub Tokenç‚¹å‡»ï¼šå¤´åƒ -&gt; Setting -&gt; Developer setting -&gt; Personal access tokens åªå‹¾ä¸Š repo è¿™ä¸€ç±»å³å¯ ç”Ÿæˆäº† token ä¹‹åä¸€å®šè¦è®°ä¸‹æ¥ï¼Œåªå±•ç¤º 1 æ¬¡ï¼Œå¾€åå†å›æ¥å°±æ²¡æ³•çœ‹äº†ã€‚ æ·»åŠ ä»“åº“ Secrets åœ¨æ‰§è¡Œ GitHub Actions æ—¶ï¼Œä½¿ä½ çš„éšç§ä¿¡æ¯ä¸ä¼šæš´éœ²ã€‚ä½†å³ä¾¿è¿™æ ·ï¼Œä»ç„¶ä¸å»ºè®®ä½ å°†ä»“åº“è®¾ç½®ä¸º publicï¼Œå› ä¸ºåœ¨ å®‰è£…å¹¶é…ç½® yuque-hexo æ—¶ï¼Œä½ åœ¨ package.json æ–‡ä»¶ä¸­æ·»åŠ äº† è¯­é›€ çš„ tokenã€‚ â€‹ æ‰“å¼€æ–°åˆ›å»ºçš„ç§æœ‰ä»“åº“ï¼Œç‚¹å‡»ï¼šsetting -&gt; Secrets -&gt; New repository secretâ€‹ åˆ›å»ºå¦‚ä¸‹ secretsï¼š GH_USERNAMEï¼šå¡«å†™ä½ çš„ GitHub åç§° â€‹GH_EMAILï¼šå¡«å†™ä½ çš„ GitHub ç»‘å®šçš„é‚®ç®± GH_REF ï¼šåšå®¢çš„ä»“åº“åœ°å€ github.com/[your-username]/[your-username].github.ioï¼ˆæ³¨æ„å»æ‰å‰é¢ https://ï¼‰ GH_TOKEN ï¼šåˆšæ‰ç”Ÿæˆçš„ token **GH_PUBLIC_IP **ï¼šæœåŠ¡å™¨çš„å…¬ç½‘ IP HEXO_DEPLOY_PRI ï¼šå–è‡ªæœ¬åœ° PC çš„ id_rsaï¼ˆè¯¦è§ä¹‹å‰çš„å†…å®¹ï¼šåœ¨æœ¬æœºç”Ÿæˆå¯†é’¥å¯¹ï¼‰ï¼Œå°†è¯¥æ–‡ä»¶æ‰€æœ‰å†…å®¹å¤åˆ¶å‡ºæ¥å³å¯ã€‚ åˆ›å»º Actionsç„¶åæ¥åˆ° Actionsï¼Œç‚¹å‡» set up a workflow yourself â€‹ workflow çš„å†…å®¹å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960name: Website Syncon: [push, repository_dispatch]jobs: website-sync: name: Hexo blog build &amp; deploy runs-on: ubuntu-latest env: TZ: Asia/Shanghai steps: - name: Checkout codes uses: actions/checkout@v2 - name: Setup node uses: actions/setup-node@v1 with: node-version: '12.x' - name: Cache node modules uses: actions/cache@v1 with: path: ~/.npm key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }} - name: Install dependencies run: | npm install hexo-cli -g npm install yuque-hexo -g npm install - name: Sync run: yuque-hexo sync - name: Generate files run: | hexo clean hexo generate - name: Server Authentication env: ACTION_DEPLOY_KEY: ${{ secrets.GH_KEY }} run: | sudo timedatectl set-timezone &quot;Asia/Shanghai&quot; mkdir -p ~/.ssh/ echo &quot;$ACTION_DEPLOY_KEY&quot; &gt; ~/.ssh/id_rsa chmod 600 ~/.ssh/id_rsa ssh-keyscan ${{ secrets.GH_PUBLIC_IP }} &gt;&gt; ~/.ssh/known_hosts git config --global user.name &quot;${{ secrets.GH_USERNAME }}&quot; git config --global user.email &quot;${{ secrets.GH_EMAIL }}&quot; - name: Deploy blog run: | git config --global user.name &quot;${{ secrets.GH_USERNAME }}&quot; git config --global user.email &quot;${{ secrets.GH_EMAIL }}&quot; git clone https://toulzx:${{ secrets.GH_TOKEN }}@${{ secrets.GH_REF }} .deploy_git hexo deploy æ³¨æ„ï¼Œæ­¤ä»£ç å—ä¸­çš„ [] ä¸æ˜¯ä¸Šæ–‡è§„å®šçš„æ„æ€ï¼Œ [] æ˜¯ä»£ç ä¸­åŒ…å«çš„å†…å®¹ï¼Œè¯·å‹¿é™¤å»ã€‚â€‹ ç‚¹å‡» commit ä¿å­˜é…ç½®ï¼Œç„¶åç‚¹å‡» Actionsï¼Œå¯ä»¥çœ‹åˆ°è‡ªåŠ¨åŒ–æ‰§è¡Œã€‚ç‚¹è¿›å»å¯ä»¥çœ‹æ‰§è¡Œçš„è¯¦æƒ…ï¼Œæ­£å¸¸æƒ…å†µè¿‡ä¸€ä¼šå°±å’Œå›¾ç¤ºå†å²è®°å½•ä¸€æ ·ï¼Œæ‰§è¡ŒæˆåŠŸã€‚â€‹ 5. é…ç½® serverlessåˆ›å»ºäº‘å‡½æ•°ä»¥è…¾è®¯äº‘ä¸ºä¾‹ï¼Œæœç´¢äº‘å‡½æ•°ï¼Œæ–°å»ºä¸€ä¸ªå‡½æ•°æœåŠ¡ï¼š é€‰æ‹©ï¼šè‡ªå®šä¹‰åˆ›å»º -&gt; äº‹ä»¶å‡½æ•° -&gt; å‡½æ•°åç§°ä»»æ„ -&gt; åœ°åŸŸè§†æƒ…å†µè€Œå®š -&gt; ä»£ç éƒ¨ç½² -&gt; ç¯å¢ƒä¸º Python2.7 -&gt; ä»£ç æäº¤æ–¹æ³•ä¸ºåœ¨çº¿ç¼–è¾‘â€‹ ä»£ç å†…å®¹å¡«å†™ 1234567891011121314# -*- coding: utf8 -*-import requestsdef main_handler(event, context): r = requests.post(&quot;https://api.github.com/repos/[your-username]/[private-repo-name]/dispatches&quot;, json = {&quot;event_type&quot;: &quot;run-it&quot;}, headers = {&quot;User-Agent&quot;:'curl/7.52.1', 'Content-Type': 'application/json', 'Accept': 'application/vnd.github.everest-preview+json', 'Authorization': 'token [ä½ åˆ›å»ºçš„TOKEN]'}) if r.status_code == 204: return &quot;This's OK!&quot; else: return r.status_code ä¿®æ”¹r = requests.post()å†…å®¹ï¼Œä»“åº“æ˜¯åˆšåˆšé‚£ä¸ªç§æœ‰ä»“åº“ã€‚æ³¨æ„ï¼Œé‚£ä¸ª token æ˜¯å¸¦ç€çš„ï¼Œå®Œæ•´çš„æ ¼å¼æ˜¯ 'Authorization': 'token xxxxxxxxxxxxxx'ã€‚â€‹ ç‚¹å‡»å®Œæˆï¼Œå¼€å§‹éƒ¨ç½²ã€‚éƒ¨ç½²å®Œæ¯•åç‚¹ä¸‹é¢é‚£ä¸ªæµ‹è¯•ï¼Œè¿”å› This's OK! è¯´æ˜ä»£ç è¯¥å‡½æ•°å¯ä»¥æ­£å¸¸è®¿é—®åˆ°ç§æœ‰ä»“åº“åˆ›å»ºçš„ Actionsã€‚ åŒæ—¶ç§æœ‰ä»“åº“çš„ GitHub Actions ä¹Ÿä¼šæ”¶åˆ°æŒ‡ä»¤ è¿‡ä¸€é˜µå°±æˆä¸‹é¢é‚£ä¸ªç»¿è‰²çš„å¯¹å·äº†ï¼Œç„¶åå»è®¿é—®ä¸€ä¸‹åšå®¢ï¼Œçœ‹çœ‹æ˜¯å¦æ­£å¸¸ã€‚ åˆ›å»ºè§¦å‘å™¨ç‚¹å‡»ï¼šè§¦å‘ç®¡ç† -&gt; åˆ›å»ºè§¦å‘å™¨ é€‰æ‹©ï¼šé»˜è®¤æµé‡ -&gt; API ç½‘å…³è§¦å‘ -&gt; æ–°å»º API æœåŠ¡ -&gt; è¯·æ±‚æ–¹æ³• ANY -&gt; å‘å¸ƒç¯å¢ƒ å‘å¸ƒ -&gt; é‰´æƒæ–¹æ³• å…é‰´æƒ -&gt; ä¸é€‰æ‹©é›†æˆå“åº” ä»–ä¼šç»™ä½ ä¸€ä¸ªè®¿é—®è·¯å¾„ï¼Œè®°ä¸‹æ¥ 6. é…ç½®è¯­é›€ Web Hookåœ¨çŸ¥è¯†åº“ä¸­ï¼šÂ·Â·Â· -&gt; è®¾ç½® -&gt; å¼€å‘è€… -&gt; æ·»åŠ  Web Hook -&gt; å…¶å®ƒæ¸ é“ å°†è§¦å‘å™¨çš„ URL ç²˜è´´åœ¨æ­¤å¤„ï¼Œå‘½åä»»æ„ï¼Œå‹¾é€‰å‘å¸ƒå’Œæ›´æ–°æ–‡æ¡£ã€‚ æ·»åŠ  Web Hook æˆåŠŸï¼Œå¯ç‚¹å‡»æµ‹è¯•ï¼ŒæŸ¥çœ‹ GitHub Actions ã€ github.ioã€ åŸŸåä¸‹ç½‘ç«™çš„æƒ…å†µã€‚ åç»­æ­å–œä½ ï¼Œåˆ°è¿™é‡Œä½ å°±å®Œæˆäº†æ‰€æœ‰é…ç½®ï¼ é…ç½®ä¸»é¢˜ä½ å·²ç»å®Œæˆäº† hexo çš„è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œç°åœ¨ä½ åœ¨è¯­é›€ä¸ŠæŒ‡å®šçš„å…¬å¼€çŸ¥è¯†åº“é‡Œåˆ›å»ºå’Œæ›´æ–°çš„æ–‡ç« ï¼Œéƒ½ä¼šåŒæ­¥åˆ°ä½ çš„ GitHub Pages ä»¥åŠ ä¸ªäººæœåŠ¡å™¨ä¸Šã€‚â€‹ ä½†æ˜¯ï¼Œä½ çš„ç½‘ç«™ä»ç„¶æ˜¾å¾—éå¸¸å•è°ƒå’Œç²—ç³™ï¼Œç°åœ¨ï¼Œæ˜¯æ—¶å€™å¯»æ‰¾ä¸€ä¸ªåˆé€‚çš„ä¸»é¢˜æ¥è£…é¥°ä½ çš„ç½‘ç«™äº†ã€‚ä½ å¯ä»¥è®¿é—®ï¼šhttps://hexo.io/themes/ï¼›æˆ–è€…ç›´æ¥åœ¨ GitHub æœç´¢ â€œhexo themeâ€.â€‹ ç©å¾—æ„‰å¿«ï¼â€‹ å›¾ç‰‡æ— æ³•æ­£å¸¸å±•ç¤ºè§£å†³æ–¹æ³•å‚è€ƒï¼šè¯­é›€ cdn é˜²ç›—é“¾ä¸´æ—¶è§£å†³æ–¹æ¡ˆ #41ä¸åŒä¸»é¢˜çš„å¤„ç†æ–¹æ³•ä¸åŒï¼Œä½ å¯èƒ½éœ€è¦åœ¨ themes/layout/ ä¸­æ‰¾åˆ°ç±»ä¼¼ post.ejs çš„æ–‡ä»¶ï¼Œå¹¶æ·»åŠ åœ¨æ­£æ–‡éƒ¨åˆ†ä¹‹å‰ï¼Œ 1&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt; ç±»ä¼¼è¿™æ ·ï¼šå®ƒå¯èƒ½ä» post.ejsé“¾æ¥åˆ°å¦ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼šæ‰“å¼€å¯¹åº”æ–‡ä»¶ï¼Œæ‰¾åˆ°æ­£æ–‡éƒ¨åˆ†ï¼Œåœ¨å‰é¢æ·»åŠ è¿™æ®µä»£ç å³å¯ï¼š æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥åœ¨è®¾ç½® img æ ‡ç­¾çš„ referrerpolicy å±æ€§ï¼š 123456&lt;img width=&quot;120&quot; height=&quot;120&quot; src=&quot;https://cdn.nlark.com/yuque/.../.png&quot; referrerpolicy=&quot;no-referrer&quot;/&gt; å‚è€ƒèµ„æ–™ã€è¯­é›€ã€‘è¯­é›€è‡ªåŠ¨åŒæ­¥åˆ° hexo åšå®¢ | yichenã€CSDNã€‘Hexo åšå®¢éƒ¨ç½²åˆ°è…¾è®¯äº‘æœåŠ¡å™¨å…¨æµç¨‹ | CareyQ03ã€CSDNã€‘å®‰è£… Hexo åšå®¢å¹¶éƒ¨ç½²åˆ° GitHub æˆ–äº‘æœåŠ¡å™¨ï¼ˆç»†èŠ‚æ•™ç¨‹ï¼Œè¶Šè¿‡å„ç§å‘ï¼‰| æ¡è°·æŸ¯å—ã€CSDNã€‘Hexo æ­å»º - éƒ¨ç½²æœåŠ¡å™¨ | Dawson_ã€CSDNã€‘nginx server ä¸­çš„ root å’Œ location çš„ root çš„åŒºåˆ« | fengzyfã€CSDNã€‘Permission denied (publickey,gssapi-keyex,gssapi-with-mic) è§£å†³æ–¹æ³• | xiaojueguanã€åšå®¢å›­ã€‘git init å’Œ git init â€“bare çš„åŒºåˆ« | æ¥è¿‘é£çš„åœ°æ–¹ cocã€CSDNã€‘Github Actions è‡ªåŠ¨éƒ¨ç½² Hexo åšå®¢è‡³ä¸ªäººæœåŠ¡å™¨ | ä¸æŸ“è½»è£³ã€CSDNã€‘ssh å…å¯†ä»¥åè¿˜æ˜¯éœ€è¦è¾“å…¥å¯†ç ï¼šssh é…ç½®çš„ä¸€äº›å‘ | Van_2009ã€CSDNã€‘SSH ç®€ä»‹åŠä¸¤ç§è¿œç¨‹ç™»å½•çš„æ–¹æ³• | Jack LDZâ€‹","link":"/2021/09/20/yuque-hexo-guide/"}],"tags":[],"categories":[]}